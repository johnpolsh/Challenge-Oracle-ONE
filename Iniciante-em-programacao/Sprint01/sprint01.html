<!DOCTYPE html>

<html lang="pt-br">
<head>
    <title>Challenge Oracle ONE | Iniciante em Programação - Sprint 01</title>
    <meta charset="UTF-8" />
    <meta name="author" content="Jonhpolsh" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <header>
        <h1 class="title">> Decodificador de texto _</h1>
        <div class="popup-help">
            <h1 class="help-sym" tabindex="0">?</h1>
            <span class="help-info">
                Este é um modelo de decodificador de texto simples capaz tanto de
                "criptografar" uma mensagem quanto "descriptografá-la".
                <button id="popup-ex-btn" class="under-btn">Exemplo</button>
            </span>
        </div>
    </header>
    <main>
        <div class="crypto-wapper">
            <div>
                <textarea id="input" class="msg-input" placeholder="Digite a mensagem aqui"></textarea>
                <button id="encrypt-btn">Encriptar</button>
                <button id="decrypt-btn">Decriptar</button>
            </div>
            <div>
                <textarea id="output" class="msg-output" placeholder="Saída" readonly disabled></textarea>
                <button id="copy-btn">Copiar</button>
            </div>
        </div>
    </main>
    <script>
        const inputTextarea = document.getElementById("input");
        const outputTextarea = document.getElementById("output");
        const encryptButton = document.getElementById("encrypt-btn");
        const decryptButton = document.getElementById("decrypt-btn");
        const copyButton = document.getElementById("copy-btn");
        const exampleButton = document.getElementById("popup-ex-btn");

        function logToConsole(str) {
            console.log(str);
        }

        function encryptMsg() {
            var msg = inputTextarea.value;
            logToConsole("encriptando a mensagem: " + msg);

            outputTextarea.value = msg.replace(/a|e|i|o|u/gi, match => (
                {
                    'a': 'ai',
                    'A': 'Ai',
                    'e': 'enter',
                    'E': 'Enter',
                    'i': 'imes',
                    'I': 'Imes',
                    'o': 'ober',
                    'O': 'Ober',
                    'u': 'ufat',
                    'U': 'Ufat'
                }[match]
            ));
        }

        function decryptMsg() {
            var msg = inputTextarea.value;
            logToConsole("decriptando a mensagem: " + msg);

            outputTextarea.value = msg.replace(/ai|enter|imes|ober|ufat/gi, match => (
                {
                    'ai': 'a',
                    'Ai': 'A',
                    'enter': 'e',
                    'Enter': 'E',
                    'imes': 'i',
                    'Imes': 'I',
                    'ober': 'o',
                    'Ober': 'O',
                    'ufat': 'u',
                    'Ufat': 'U'
                }[match]
            ));
        }

        function copyCryptMsg() {
            navigator.clipboard.writeText(outputTextarea.value).then(function () {
                logToConsole('mesagem copiada para o clipboard');
                outputTextarea.animate([
                    { outline: 'dashed 2px #2dba78' }
                ], {
                    duration: 400
                });
            }, function () {
                logToConsole('não foi possível copiar a mensagem');
            })
        }

        encryptButton.onclick = encryptMsg;
        decryptButton.onclick = decryptMsg;
        copyButton.onclick = copyCryptMsg;
        exampleButton.onclick = function () {
            inputTextarea.value = `"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam eget ligula eu lectus lobortis condimentum. Aliquam nonummy auctor massa. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nulla at risus. Quisque purus magna, auctor et, sagittis ac, posuere eu, lectus. Nam mattis, felis ut adipiscing."`;
        };
    </script>
</body>
</html>
